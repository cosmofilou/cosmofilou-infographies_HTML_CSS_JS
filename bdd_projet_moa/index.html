<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide Ultime - Suivi Projet MOA Salesforce sur Notion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 0.5);
            border-radius: 20px;
            border: 2px solid transparent;
            background-clip: content-box;
        }
        
        .nav-link {
            transition: all 0.2s ease-in-out;
            border-left: 3px solid transparent;
        }
        
        .nav-link.active {
            background-color: #eef2ff;
            color: #4338ca;
            font-weight: 700;
            border-left-color: #4f46e5;
        }
        .dark .nav-link.active {
            background-color: #3730a3;
            color: #c7d2fe;
            border-left-color: #818cf8;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up { opacity: 0; }
        .is-visible { animation: fadeInUp 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }

        .pipeline-step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(2.5rem);
            width: 6rem;
            height: 2px;
            background-color: #cbd5e1;
        }
        .dark .pipeline-step:not(:last-child)::after { background-color: #475569; }
        @media (max-width: 1280px) { .pipeline-step:not(:last-child)::after { width: 4rem; transform: translateX(2.5rem); } }
        @media (max-width: 1024px) {
            .pipeline-step { min-width: 120px; }
            .pipeline-step:not(:last-child)::after { width: 3rem; transform: translateX(2rem); }
        }

        .section-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }
        .dark .section-card {
            background-color: #1e293b;
            border-color: #334155;
        }
        .section-card:hover {
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.07);
            transform: translateY(-4px);
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-700 dark:text-slate-300 transition-colors duration-300">

    <nav class="fixed top-0 left-0 h-full w-64 bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg border-r border-slate-200 dark:border-slate-700 p-4 z-20 hidden lg:flex flex-col">
        <div class="flex items-center gap-3 mb-10 p-2">
            <div class="text-3xl">🗺️</div>
            <div>
                <h1 class="text-base font-bold text-slate-900 dark:text-white">Pilotage Projet Salesforce</h1>
                <p class="text-xs text-slate-500 dark:text-slate-400">Le Guide Ultime sur Notion</p>
            </div>
        </div>
        <ul id="nav-menu" class="space-y-1.5 overflow-y-auto">
            <li><a href="#flux-visuel" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">⚡️ Flux de Travail</a></li>
            <li><a href="#hub" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🏠 Hub Projet</a></li>
            <li><a href="#portail-agences" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🏢 Portail de Saisie</a></li>
            <li><a href="#taxonomie" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🏷️ Base de Données</a></li>
            <li><a href="#priorisation" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🚀 Sprints & Roadmap</a></li>
            <li><a href="#processus-cles" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🔑 Processus Clés</a></li>
            <li><a href="#templates" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">📋 Modèles d'Action</a></li>
            <li><a href="#qualite-automatisation" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🤖 Automatisation</a></li>
            <li><a href="#vues-op" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">📊 Vues de Pilotage</a></li>
            <li><a href="#migration" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🔄 Migration</a></li>
            <li><a href="#mise-en-place" class="nav-link flex items-center gap-3 px-4 py-2.5 rounded-lg font-medium text-slate-600 dark:text-slate-300">🛠️ Plan de Déploiement</a></li>
        </ul>
        <div class="mt-auto p-2">
            <button id="theme-toggle" class="w-full flex items-center justify-center gap-3 px-4 py-2 rounded-lg font-medium bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all">
                <span id="theme-toggle-dark-icon" class="hidden text-lg">🌙</span>
                <span id="theme-toggle-light-icon" class="hidden text-lg">☀️</span>
                <span id="theme-toggle-text"></span>
            </button>
        </div>
    </nav>

    <main class="lg:ml-64 p-6 md:p-12">
        <header class="mb-16 text-center lg:text-left fade-in-up">
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white mb-3">
                <span class="bg-gradient-to-r from-indigo-500 via-purple-500 to-sky-400 bg-clip-text text-transparent">Le Guide Ultime du Pipeline Salesforce</span>
            </h1>
            <p class="text-lg text-slate-500 dark:text-slate-400 max-w-3xl mx-auto lg:mx-0">Le plan directeur pour un système de pilotage centralisé, puissant et décisionnel sur Notion, conçu pour un Chef de Projet MOA Salesforce.</p>
        </header>

        <section id="flux-visuel" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-10 text-slate-900 dark:text-white">⚡️ Le Flux de Travail Visuel</h2>
            <div class="bg-white dark:bg-slate-800 rounded-xl p-8 shadow-md border border-slate-200 dark:border-slate-700 overflow-x-auto">
                <div class="flex items-start justify-between gap-x-12 xl:gap-x-24 min-w-max">
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">🔴</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">0. À Trier</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">🟣</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">0a. En attente d'infos</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">🔵</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">1. En analyse MOA</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">📝</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">2. Prêt pour DEV</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">🧑‍💻</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">3. En cours de DEV</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">🚧</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">3a. Bloqué</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">✅</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">4. En recette MOA</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">🏆</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">5. Validé en recette</p></div>
                    <div class="relative flex flex-col items-center text-center w-32 pipeline-step"><div class="flex items-center justify-center h-10 text-2xl">🚀</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">6. Prêt pour MEP</p></div>
                    <div class="relative flex flex-col items-center text-center w-32"><div class="flex items-center justify-center h-10 text-2xl">📦</div><p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-100">7. Terminé</p></div>
                </div>
            </div>
        </section>

        <section id="hub" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🏠 Hub Projet : Votre Tour de Contrôle</h2>
            <div class="section-card">
                <div class="p-5 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg mb-8 border border-indigo-200 dark:border-indigo-800">
                    <h4 class="font-bold text-indigo-800 dark:text-indigo-200 mb-2">🏠 Message d'Accueil de la Page</h4>
                    <div class="text-sm space-y-2 text-slate-600 dark:text-slate-300">
                        <p>Bienvenue sur la tour de contrôle du projet Salesforce. Cet espace centralise le pilotage de toutes les demandes. Retrouvez ci-dessous vos actions prioritaires, les indicateurs clés du projet et les accès rapides aux différentes sections de notre espace.</p>
                        <p class="font-semibold">En cas de question sur l'utilisation de cet outil, votre contact MOA est <code class="bg-slate-200 dark:bg-slate-600 px-1 py-0.5 rounded text-slate-800 dark:text-slate-200">Aurélien DA COSTA (adacosta@proxiserve.fr)</code>.</p>
                    </div>
                </div>
                <div class="grid lg:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-semibold text-lg mb-4 text-slate-800 dark:text-slate-100">Tableau de Bord d'Actions</h4>
                        <div class="space-y-4">
                            <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">
                                <p class="font-bold">🔘 Bouton : Déclarer un Bug 🐞</p>
                                <p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Pour signaler un dysfonctionnement ou une anomalie sur l'application.</p>
                            </div>
                            <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">
                                <p class="font-bold">🔘 Bouton : Proposer une Story ✨</p>
                                <p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Pour proposer une nouvelle fonctionnalité ou une amélioration créant de la valeur.</p>
                            </div>
                            <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">
                                <p class="font-bold">🔘 Bouton : Identifier un GAP 🔌</p>
                                <p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Pour signaler une fonctionnalité manquante par rapport à un ancien outil.</p>
                            </div>
                            <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">
                                <p class="font-bold">🔘 Bouton : Demander une Correction 🦴</p>
                                <p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Pour une demande de modification de données en base.</p>
                            </div>
                            <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">
                                <p class="font-bold">🔘 Bouton : Poser une Question 💬</p>
                                <p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Pour toute demande d'information ou d'assistance sur l'utilisation de l'outil.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg mb-4 text-slate-800 dark:text-slate-100">Vues Clés & Indicateurs</h4>
                        <p class="text-sm mb-3 text-slate-600 dark:text-slate-400">Vues filtrées pour un accès rapide aux informations pertinentes.</p>
                        <div class="space-y-3"><p class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">➡️ Mes Demandes en Cours</p><p class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">🐞 Bugs ouverts</p><p class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-slate-800 dark:text-slate-200">✅ Recettes en attente</p></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="portail-agences" class="scroll-mt-20 mb-20 fade-in-up">
             <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🏢 Portail de Saisie Simplifié</h2>
            <div class="section-card">
                 <div class="p-5 bg-yellow-50 dark:bg-yellow-900/30 rounded-lg mb-8 border border-yellow-200 dark:border-yellow-800">
                    <h4 class="font-bold text-yellow-800 dark:text-yellow-200 mb-2">🏢 Message d'Accueil de la Page</h4>
                     <div class="text-sm space-y-2 text-slate-600 dark:text-slate-300">
                        <p><strong>Une idée d'amélioration ? Un bug à nous remonter ? Vous êtes au bon endroit !</strong> Choisissez votre périmètre ci-dessous et utilisez les boutons pour créer votre demande. Le bon modèle s'ouvrira et les informations de base seront pré-remplies pour vous faire gagner du temps.</p>
                        <p class="font-semibold">En cas de problème avec ce portail, contactez <code class="bg-slate-200 dark:bg-slate-600 px-1 py-0.5 rounded text-slate-800 dark:text-slate-200">Aurélien DA COSTA</code>.</p>
                    </div>
                </div>
                <h4 class="font-semibold text-xl mb-6 text-center text-slate-800 dark:text-slate-100">Choisissez votre périmètre pour créer une demande</h4>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center"><h5 class="font-bold text-lg text-slate-800 dark:text-slate-200">💧 Prox-Hydro</h5><div class="flex gap-4 mt-3"><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">🐞 Signaler un Bug</button><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">✨ Proposer une Évolution</button></div></div>
                    <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center"><h5 class="font-bold text-lg text-slate-800 dark:text-slate-200">☀️ Agence PXS Est</h5><div class="flex gap-4 mt-3"><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">🐞 Signaler un Bug</button><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">✨ Proposer une Évolution</button></div></div>
                    <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center"><h5 class="font-bold text-lg text-slate-800 dark:text-slate-200">🏛️ Agence PXS IDF</h5><div class="flex gap-4 mt-3"><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">🐞 Signaler un Bug</button><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">✨ Proposer une Évolution</button></div></div>
                    <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center"><h5 class="font-bold text-lg text-slate-800 dark:text-slate-200">☁️ Agence PXS Nord</h5><div class="flex gap-4 mt-3"><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">🐞 Signaler un Bug</button><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">✨ Proposer une Évolution</button></div></div>
                    <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center"><h5 class="font-bold text-lg text-slate-800 dark:text-slate-200">⛵ Agence PXS Ouest</h5><div class="flex gap-4 mt-3"><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">🐞 Signaler un Bug</button><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">✨ Proposer une Évolution</button></div></div>
                    <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center"><h5 class="font-bold text-lg text-slate-800 dark:text-slate-200">🏞️ Agence PXS Centre-Est</h5><div class="flex gap-4 mt-3"><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">🐞 Signaler un Bug</button><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">✨ Proposer une Évolution</button></div></div>
                    <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg text-center md:col-span-2 lg:col-span-1"><h5 class="font-bold text-lg text-slate-800 dark:text-slate-200">🧑‍🚀 Direction Technique</h5><div class="flex gap-4 mt-3"><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">🐞 Signaler un Bug</button><button class="w-full p-2 bg-white dark:bg-slate-600 rounded-lg shadow-sm font-semibold text-slate-800 dark:text-slate-100">✨ Proposer une Évolution</button></div></div>
                </div>
            </div>
        </section>

        <section id="taxonomie" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🏷️ La Base de Données : Taxonomie Détaillée</h2>
            <p class="mb-8 text-slate-600 dark:text-slate-400 max-w-3xl">Le cerveau du système : la base de données <code class="bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 px-1.5 py-0.5 rounded font-semibold">"Pipeline Global des Demandes"</code>. Voici la configuration détaillée de toutes ses propriétés.</p>
            <div class="section-card">
                 <div class="grid lg:grid-cols-2 gap-x-8 gap-y-12">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100">Propriétés de Suivi & Qualification</h3>
                        <div class="space-y-4 text-sm text-slate-600 dark:text-slate-300">
                            <p><strong>Nom du Ticket (Titre) :</strong> Le titre clair et concis de la demande.</p>
                            <p><strong>Statut (État) :</strong> Le statut du ticket dans le workflow (ex: `0. À Trier 🔴`).</p>
                            <p><strong>Rapporteur (MOA) (Personne) :</strong> Le membre de l'équipe MOA assigné au traitement.</p>
                            <p><strong>Créé par (Créé par) :</strong> La personne qui a soumis la demande (automatique).</p>
                             <div class="p-4 bg-slate-100 dark:bg-slate-700/50 rounded-lg">
                                <h4 class="font-semibold text-slate-800 dark:text-slate-200">Type de Demande (Sélection)</h4>
                                <ul class="flex flex-wrap gap-2 text-sm mt-2">
                                    <li class="bg-white dark:bg-slate-600 px-2 py-1 rounded-full">🐞 Bug</li>
                                    <li class="bg-white dark:bg-slate-600 px-2 py-1 rounded-full">✨ Story</li>
                                    <li class="bg-white dark:bg-slate-600 px-2 py-1 rounded-full">🔌 GAP</li>
                                    <li class="bg-white dark:bg-slate-600 px-2 py-1 rounded-full">🦴 Correction</li>
                                    <li class="bg-white dark:bg-slate-600 px-2 py-1 rounded-full">🎓 Formation</li>
                                    <li class="bg-white dark:bg-slate-600 px-2 py-1 rounded-full">💬 Question</li>
                                </ul>
                            </div>
                            <p><strong>Périmètre (Sélection) :</strong> Inclut TOUTES les agences (`💧 Prox-Hydro`, `☀️ Agence PXS Est`, etc.).</p>
                        </div>
                    </div>
                    <div>
                         <h3 class="text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100">Propriétés de Pilotage & Dépendances</h3>
                         <div class="space-y-4 text-sm text-slate-600 dark:text-slate-300">
                            <p><strong>N° Ticket Freshservice (URL) :</strong> 🔴 **Obligatoire si `Type` est `Bug`**. Lien vers le ticket de support.</p>
                             <p><strong>N° Ticket Jira (URL) :</strong> 🟢 **Obligatoire pour passer en `Prêt pour DEV`**. Lien vers le ticket de développement.</p>
                             <p><strong>Priorité (Sélection) :</strong> `Haute 🔥`, `Moyenne 🟠`, `Basse 🔵`.</p>
                             <p><strong>Sprint (Sélection) :</strong> `🧊 Backlog`, `▶️ Sprint Actuel`, `⏭️ Sprint Suivant`.</p>
                             <p><strong>Effort, Impact, Confiance (Nombre) & Score RICE (Formule)</strong></p>
                         </div>
                    </div>
                </div>
                <div class="mt-8">
                     <h3 class="text-xl font-semibold mb-6 text-slate-800 dark:text-slate-100 border-t dark:border-slate-700 pt-8">Domaines Fonctionnels (Sous-catégories)</h3>
                     <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-6 text-sm">
                        <div><h5 class="font-semibold mb-2 text-slate-700 dark:text-slate-200">Commerce & Vente</h5><ul class="space-y-1.5 list-disc list-inside text-slate-600 dark:text-slate-400"><li>📈 Commerce & Prospection</li><li>✍️ Contrat & Résiliation</li><li>💰 Facturation & Notifications</li></ul></div>
                        <div><h5 class="font-semibold mb-2 text-slate-700 dark:text-slate-200">Opérations & Service</h5><ul class="space-y-1.5 list-disc list-inside text-slate-600 dark:text-slate-400"><li>🚚 Chantiers & Workflow de Pose</li><li>📅 Planification & Tournées</li><li>📱 Mobilité</li><li>📡 Relevé & Planning</li></ul></div>
                        <div><h5 class="font-semibold mb-2 text-slate-700 dark:text-slate-200">Gestion des Actifs</h5><ul class="space-y-1.5 list-disc list-inside text-slate-600 dark:text-slate-400"><li>🏢 Patrimoine & Appareils</li><li>📦 Produits, Stock & Compteurs</li></ul></div>
                        <div><h5 class="font-semibold mb-2 text-slate-700 dark:text-slate-200">Transverse & Technique</h5><ul class="space-y-1.5 list-disc list-inside text-slate-600 dark:text-slate-400"><li>📊 Rapports & TDB</li><li>🔗 Intégrations & EDI</li><li>🔑 Droits & Accès</li><li>⚙️ Utilitaires</li><li>💾 Reprise de Données</li><li>📄 Éditique</li><li>🎨 Ergonomie</li><li>🎯 Autonomie des Agences</li></ul></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="templates" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">📋 Modèles d'Action Détaillés</h2>
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="section-card">
                    <h3 class="text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100">🔧 Modèle Unifié : Support</h3>
                    <p class="mb-6 text-sm text-slate-600 dark:text-slate-400">Pour `Bug`, `Correction`, `Question`.</p>
                    <div class="space-y-4 text-sm">
                        <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg"><h4 class="font-bold text-slate-800 dark:text-slate-200">🕹️ Actions Rapides</h4><div class="flex gap-2 mt-2"><code class="text-xs bg-white dark:bg-slate-600 p-1 rounded">❓ Demander Infos</code> <code class="text-xs bg-white dark:bg-slate-600 p-1 rounded">📡 Escalader à la DSI</code> <code class="text-xs bg-white dark:bg-slate-600 p-1 rounded">✅ Terminer le Ticket</code></div></div>
                        <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg"><h4 class="font-bold text-slate-800 dark:text-slate-200">📝 Résumé du Problème / Question</h4><p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Synthétiser ou copier/coller ici la demande initiale.</p></div>
                        <div class="p-3 bg-red-50 dark:bg-red-900/20 rounded-lg"><h4 class="font-bold text-red-800 dark:text-red-300">🔻 Analyse du Bug 🐞</h4><ul class="list-disc list-inside text-xs mt-1 text-red-700 dark:text-red-200"><li>Étapes de reproduction :</li><li>Comportement attendu :</li><li>Comportement observé :</li></ul></div>
                        <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><h4 class="font-bold text-blue-800 dark:text-blue-300">🔻 Analyse de la Correction 🦴</h4><ul class="list-disc list-inside text-xs mt-1 text-blue-700 dark:text-blue-200"><li>Données à corriger :</li><li>Valeur attendue :</li></ul></div>
                        <div class="p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"><h4 class="font-bold text-yellow-800 dark:text-yellow-300">🔻 Analyse de la Question 💬</h4><ul class="list-disc list-inside text-xs mt-1 text-yellow-700 dark:text-yellow-200"><li>Question détaillée de l'utilisateur :</li><li>Réponse apportée / Action à mener :</li></ul></div>
                        <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg"><h4 class="font-bold text-slate-800 dark:text-slate-200">📎 Pièces Jointes</h4><p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Ajouter captures d'écran, vidéos, logs.</p></div>
                    </div>
                </div>
                <div class="section-card">
                    <h3 class="text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100">✨ Modèle Évolution : Story & GAP</h3>
                    <p class="mb-6 text-sm text-slate-600 dark:text-slate-400">Structure la demande comme une spécification fonctionnelle.</p>
                     <div class="space-y-4 text-sm">
                        <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg"><h4 class="font-bold text-slate-800 dark:text-slate-200">🕹️ Actions Rapides</h4><div class="flex gap-2 mt-2"><code class="text-xs bg-white dark:bg-slate-600 p-1 rounded">📝 Prêt pour Dev</code> <code class="text-xs bg-white dark:bg-slate-600 p-1 rounded">❓ Demander Infos</code></div></div>
                        <div class="p-3 bg-green-50 dark:bg-green-900/20 rounded-lg"><h4 class="font-bold text-green-800 dark:text-green-300">🔻 Rédaction du Ticket Jira 🔗</h4><p class="text-xs mt-1 text-green-700 dark:text-green-200">Ce ticket doit être rédigé dans Jira avant de passer en `Prêt pour DEV`.</p></div>
                        <div class="p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><h4 class="font-bold text-indigo-800 dark:text-indigo-300">🔻 Le "Pourquoi" (User Story)</h4><p class="text-xs mt-1 text-indigo-700 dark:text-indigo-200"><strong>En tant que</strong> [Persona], <strong>je veux</strong> [Objectif] <strong>afin de</strong> [Bénéfice].</p></div>
                        <div class="p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg"><h4 class="font-bold text-indigo-800 dark:text-indigo-300">🔻 Le "Quoi" (Critères d'acceptance)</h4><ul class="list-disc list-inside text-xs mt-1 text-indigo-700 dark:text-indigo-200"><li>Étant donné que..., quand je..., alors...</li></ul></div>
                        <div class="p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg"><h4 class="font-bold text-slate-800 dark:text-slate-200">🔻 Hors-Périmètre & Maquettes</h4><p class="text-xs mt-1 text-slate-500 dark:text-slate-400">Lister ce que la fonctionnalité ne fera pas. Ajouter les maquettes ici.</p></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NOUVELLES SECTIONS COMPLÉTÉES -->
        <section id="priorisation" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🚀 Sprints & Roadmap : Devenir Décisionnel</h2>
            <div class="section-card">
                <p class="mb-6 text-slate-600 dark:text-slate-300">Pour piloter efficacement, il faut passer d'une simple liste de tâches à une roadmap stratégique. Cela passe par deux niveaux de priorisation : l'un pour le quotidien (opérationnel), l'autre pour la vision à long terme (stratégique).</p>
                <div class="grid lg:grid-cols-5 gap-8">
                    <div class="lg:col-span-2">
                        <h3 class="text-xl font-bold mb-4 text-slate-800 dark:text-slate-100">Priorisation Opérationnelle : Le Kanban</h3>
                         <div class="p-5 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg border border-indigo-200 dark:border-indigo-800">
                            <h4 class="font-bold text-indigo-800 dark:text-indigo-200">🚀 Page : Roadmap & Sprints</h4>
                            <p class="text-sm mt-1 text-slate-600 dark:text-slate-300">La vue Kanban permet de visualiser et de modifier la priorité des demandes par un simple glisser-déposer.</p>
                        </div>
                        <ol class="list-decimal list-inside space-y-3 mt-4 text-sm text-slate-600 dark:text-slate-300">
                            <li>Créer la page "🚀 Roadmap & Sprints".</li>
                            <li>Ajouter une propriété `Sprint` avec les options: <code class="bg-slate-200 dark:bg-slate-700 px-1.5 py-0.5 rounded text-slate-800 dark:text-slate-200">🧊 Backlog</code>, <code class="bg-slate-200 dark:bg-slate-700 px-1.5 py-0.5 rounded text-slate-800 dark:text-slate-200">▶️ Sprint Actuel</code>, <code class="bg-slate-200 dark:bg-slate-700 px-1.5 py-0.5 rounded text-slate-800 dark:text-slate-200">⏭️ Sprint Suivant</code>.</li>
                            <li>Créer une vue Kanban groupée par la propriété `Sprint`.</li>
                            <li>Prioriser par glisser-déposer.</li>
                        </ol>
                    </div>
                    <div class="lg:col-span-3">
                        <h3 class="text-xl font-bold mb-4 text-slate-800 dark:text-slate-100">Priorisation Stratégique : La Méthode RICE</h3>
                        <p class="text-sm mb-4 text-slate-600 dark:text-slate-300">Pour décider quelles "Stories" ou "GAP" développer, la méthode RICE (<strong>R</strong>each, <strong>I</strong>mpact, <strong>C</strong>onfidence, <strong>E</strong>ffort) apporte une approche objective.</p>
                        <div class="space-y-4 text-slate-700 dark:text-slate-300">
                            <div class="p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg">
                                <p><strong>Effort (Nombre) :</strong> Complexité en points (1, 2, 3, 5, 8...).</p>
                                <p><strong>Impact (Nombre) :</strong> Note de 1 à 5.</p>
                                <p><strong>Confiance (Nombre) :</strong> Certitude de l'estimation en % (ex: 80).</p>
                            </div>
                        </div>
                        <div class="mt-4"><h4 class="font-semibold text-md mb-2 text-slate-800 dark:text-slate-100">La Formule Magique dans Notion</h4><div class="p-4 bg-slate-100 dark:bg-slate-700 rounded-lg font-mono text-sm text-slate-800 dark:text-slate-200 break-words"><code>if(prop("Effort") > 0, round(prop("Impact") * (prop("Confiance") / 100) / prop("Effort") * 100) / 100, 0)</code></div></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="processus-cles" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🔑 Processus Clés de Qualification</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="section-card"><h3 class="text-xl font-bold mb-4 text-slate-800 dark:text-slate-100">🔴 Triage vs. Analyse 🔵</h3><p class="text-slate-600 dark:text-slate-300">Le <strong>Triage</strong> est un filtre rapide (1-5 min) pour valider la clarté et l'unicité de la demande. L'<strong>Analyse</strong> est une investigation fonctionnelle approfondie pour définir la solution.</p></div>
                <div class="section-card"><h3 class="text-xl font-bold mb-4 text-slate-800 dark:text-slate-100">🔌 GAP vs. Story ✨</h3><p class="text-slate-600 dark:text-slate-300">Un <strong>GAP</strong> est un rattrapage par rapport à une fonctionnalité d'un ancien outil. Une <strong>Story</strong> est une pure nouvelle fonctionnalité qui n'a jamais existé.</p></div>
            </div>
        </section>

        <section id="qualite-automatisation" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🤖 Automatisation via les Boutons & Déclencheurs</h2>
            <div class="section-card">
                <p class="mb-6 text-slate-600 dark:text-slate-300">Utilisez les outils de Notion pour standardiser les actions répétitives, garantir la qualité des données et accélérer le workflow.</p>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100">Les Boutons (Actions Manuelles)</h3>
                        <div class="p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300">
                            <h4 class="font-semibold text-lg mb-2 text-slate-800 dark:text-slate-100">Tutoriel : Créer le bouton `📡 Escalader à la DSI`</h4>
                            <ol class="list-decimal list-inside space-y-2 text-sm">
                                <li>Dans un modèle de page (ex: `🐞 Modèle de Bug`), tapez `/bouton`.</li>
                                <li>Nommez-le "📡 Escalader à la DSI".</li>
                                <li>Ajoutez une étape : "Modifier les pages dans..." → "Pipeline Global".</li>
                                <li>Choisissez "Cette page" comme page à modifier.</li>
                                <li>Modifiez `Statut` → `🚧 Bloqué`.</li>
                                <li>Ajoutez une 2ème étape pour modifier `Équipe` → `DSI (N3)`.</li>
                                <li>(Optionnel) Ajoutez une 3ème étape "Ajouter un bloc" → "Commentaire" et mentionnez `@DSI`.</li>
                            </ol>
                        </div>
                    </div>
                     <div>
                        <h3 class="text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100">Les Automatisations (Déclencheurs)</h3>
                        <div class="p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300">
                            <h4 class="font-semibold text-lg mb-2 text-slate-800 dark:text-slate-100">Tutoriel : Statut par défaut `À Trier`</h4>
                            <ol class="list-decimal list-inside space-y-2 text-sm">
                                <li>Cliquez sur l'éclair ⚡ en haut de votre BDD "Pipeline Global".</li>
                                <li>Créez une "Nouvelle automatisation".</li>
                                <li>Le déclencheur (Trigger) est "Page ajoutée".</li>
                                <li>L'action est "Modifier la propriété `Statut`".</li>
                                <li>Choisissez `0. À trier 🔴` comme nouvelle valeur.</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="vues-op" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">📊 Page : Dashboards de Pilotage</h2>
            <div class="space-y-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100">Vues Opérationnelles</h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="section-card p-6 border-t-4 border-red-500"><h3 class="text-lg font-bold mb-2 text-slate-800 dark:text-slate-100">Mon Triage 🔥</h3><p class="text-xs font-mono text-slate-500 dark:text-slate-400">Filtre: `Statut` est `À trier`</p></div>
                        <div class="section-card p-6 border-t-4 border-sky-500"><h3 class="text-lg font-bold mb-2 text-slate-800 dark:text-slate-100">Pipeline Actif 🏗️</h3><p class="text-xs font-mono text-slate-500 dark:text-slate-400">Vue Kanban groupée par `Statut`</p></div>
                        <div class="section-card p-6 border-t-4 border-amber-500"><h3 class="text-lg font-bold mb-2 text-slate-800 dark:text-slate-100">Points de Blocage 🚧</h3><p class="text-xs font-mono text-slate-500 dark:text-slate-400">Filtre: `Statut` est `Bloqué`</p></div>
                        <div class="section-card p-6 border-t-4 border-purple-500"><h3 class="text-lg font-bold mb-2 text-slate-800 dark:text-slate-100">Recettes à Valider ✅</h3><p class="text-xs font-mono text-slate-500 dark:text-slate-400">Filtre: `Statut` est `En recette MOA`</p></div>
                    </div>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100">Vues de Suivi des Dépendances</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="section-card p-6"><h3 class="text-lg font-bold mb-2 text-slate-800 dark:text-slate-100">Suivi des Tickets Support (Freshservice) 🔗</h3><p class="text-sm mb-4 text-slate-600 dark:text-slate-400">Vue unique de tous les tickets ayant une dépendance avec le support.</p><p class="text-xs font-mono text-slate-500 dark:text-slate-400">Filtre: `N° Ticket Freshservice` n'est pas vide ET `Statut` n'est pas `Terminé`.</p></div>
                        <div class="section-card p-6"><h3 class="text-lg font-bold mb-2 text-slate-800 dark:text-slate-100">En Attente de la DSI 🧑‍🚀</h3><p class="text-sm mb-4 text-slate-600 dark:text-slate-400">Isoler les points de blocage qui nécessitent une action de la DSI.</p><p class="text-xs font-mono text-slate-500 dark:text-slate-400">Filtre: `Statut` est `Bloqué` ET `N° Ticket Freshservice` n'est pas vide.</p></div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="migration" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🔄 Guide de Migration</h2>
            <div class="section-card">
                 <p class="mb-6 text-slate-600 dark:text-slate-300">Pour assurer une transition fluide, il est crucial de mapper les anciens statuts des différents outils (Licorne, Hydroplan, GAP) vers la nouvelle taxonomie unifiée.</p>
                 <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100 dark:bg-slate-700 dark:text-slate-300">
                            <tr>
                                <th scope="col" class="px-6 py-3 rounded-l-lg">Ancien Statut (Exemple)</th>
                                <th scope="col" class="px-6 py-3">Ancien Outil</th>
                                <th scope="col" class="px-6 py-3 rounded-r-lg">Nouveau Statut Cible</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white dark:bg-slate-800 border-b dark:border-slate-700 text-slate-600 dark:text-slate-300"><td class="px-6 py-4">Nouveau</td><td class="px-6 py-4">Licorne</td><td class="px-6 py-4 font-semibold text-red-600 dark:text-red-400">0. À Trier 🔴</td></tr>
                            <tr class="bg-white dark:bg-slate-800 border-b dark:border-slate-700 text-slate-600 dark:text-slate-300"><td class="px-6 py-4">En cours d'analyse</td><td class="px-6 py-4">GAP</td><td class="px-6 py-4 font-semibold text-blue-600 dark:text-blue-400">1. En analyse MOA 🔵</td></tr>
                            <tr class="bg-white dark:bg-slate-800 border-b dark:border-slate-700 text-slate-600 dark:text-slate-300"><td class="px-6 py-4">À développer</td><td class="px-6 py-4">Hydroplan</td><td class="px-6 py-4 font-semibold text-slate-600 dark:text-slate-300">2. Prêt pour DEV 📝</td></tr>
                            <tr class="bg-white dark:bg-slate-800 border-b dark:border-slate-700 text-slate-600 dark:text-slate-300"><td class="px-6 py-4">En développement</td><td class="px-6 py-4">Jira</td><td class="px-6 py-4 font-semibold text-sky-600 dark:text-sky-400">3. En cours de DEV 🧑‍💻</td></tr>
                            <tr class="bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300"><td class="px-6 py-4">Résolu</td><td class="px-6 py-4">Licorne</td><td class="px-6 py-4 font-semibold text-green-600 dark:text-green-400">7. Terminé 📦</td></tr>
                        </tbody>
                    </table>
                 </div>
            </div>
        </section>

        <section id="mise-en-place" class="scroll-mt-20 mb-20 fade-in-up">
            <h2 class="text-3xl font-bold mb-8 text-slate-900 dark:text-white">🛠️ Plan de Déploiement</h2>
            <div class="space-y-8">
                <div class="section-card"><h3 class="text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100">Phase 1 : Construction du Socle 🧱</h3><p class="text-sm text-slate-600 dark:text-slate-300">Créer la base <code class="bg-slate-200 dark:bg-slate-600 px-1.5 py-0.5 rounded">Pipeline Global</code> et configurer toutes les propriétés de la section <a href="#taxonomie" class="text-indigo-600 hover:underline">Taxonomie</a>.</p></div>
                <div class="section-card"><h3 class="text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100">Phase 2 : Création de l'Espace de Travail 🎨</h3><p class="text-sm text-slate-600 dark:text-slate-300">Construire le <a href="#hub" class="text-indigo-600 hover:underline">Hub Projet</a>, le <a href="#portail-agences" class="text-indigo-600 hover:underline">Portail Agences</a>, les <a href="#templates" class="text-indigo-600 hover:underline">modèles</a> et les <a href="#qualite-automatisation" class="text-indigo-600 hover:underline">boutons</a>.</p></div>
                <div class="section-card"><h3 class="text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100">Phase 3 : Migration & Formation 🧑‍🏫</h3><p class="text-sm mb-4 text-slate-600 dark:text-slate-300">Migrer un petit lot de tickets existants en utilisant le <a href="#migration" class="text-indigo-600 hover:underline">guide de migration</a>. Former le groupe pilote sur le nouveau processus.</p><blockquote class="border-l-4 border-indigo-500 pl-4 text-sm italic text-slate-500 dark:text-slate-400"><strong>Conseil d'Expert :</strong> Le retour du groupe pilote est crucial. Ajustez le système après leurs retours AVANT de tout migrer.</blockquote></div>
                <div class="section-card"><h3 class="text-2xl font-bold mb-2 text-slate-800 dark:text-slate-100">Phase 4 : Déploiement Complet 🎉</h3><p class="text-sm text-slate-600 dark:text-slate-300">Après validation, migrer l'ensemble des tickets restants. Communiquer le lancement à toutes les parties prenantes et archiver les anciens espaces.</p></div>
            </div>
        </section>

        <footer class="text-center mt-24 py-8 border-t border-slate-200 dark:border-slate-700 fade-in-up">
            <p class="text-sm text-slate-500 dark:text-slate-400">&copy; 2025 - Conçu par cosmofilou. Tous droits réservés.</p>
        </footer>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggleBtn = document.getElementById('theme-toggle');
            const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
            const themeToggleText = document.getElementById('theme-toggle-text');

            const updateButtonUI = (isDark) => {
                if (isDark) {
                    themeToggleLightIcon.classList.remove('hidden');
                    themeToggleDarkIcon.classList.add('hidden');
                    themeToggleText.textContent = 'Mode Clair';
                } else {
                    themeToggleLightIcon.classList.add('hidden');
                    themeToggleDarkIcon.classList.remove('hidden');
                    themeToggleText.textContent = 'Mode Sombre';
                }
            };

            const applyTheme = (isDark) => {
                if (isDark) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            };
            
            const initialIsDark = localStorage.getItem('color-theme') === 'dark' ||
                                  (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            
            applyTheme(initialIsDark);
            updateButtonUI(initialIsDark);

            themeToggleBtn.addEventListener('click', () => {
                const newIsDark = !document.documentElement.classList.contains('dark');
                applyTheme(newIsDark);
                updateButtonUI(newIsDark);
                localStorage.setItem('color-theme', newIsDark ? 'dark' : 'light');
            });

            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            const navMenu = document.getElementById('nav-menu');

            const activateNavLink = (id) => {
                 let activeLink = null;
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('href') === `#${id}`) {
                        link.classList.add('active');
                        activeLink = link;
                    }
                });
                if (activeLink && navMenu) {
                    const navRect = navMenu.getBoundingClientRect();
                    const linkRect = activeLink.getBoundingClientRect();
                     if (linkRect.bottom > navRect.bottom || linkRect.top < navRect.top) {
                        activeLink.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            };

            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        activateNavLink(entry.target.id);
                    }
                });
            }, { rootMargin: '-40% 0px -55% 0px' }); 

            sections.forEach(section => {
                scrollObserver.observe(section);
            });
            
            const animatedElements = document.querySelectorAll('.fade-in-up');
            const animationObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            animatedElements.forEach(el => {
                animationObserver.observe(el);
            });
        });
    </script>
</body>
</html>

