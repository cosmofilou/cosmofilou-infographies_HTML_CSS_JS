<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocole V5 : Guide de Construction Ultime pour Votre Life OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Applique le thème avant le rendu de la page pour éviter le "flash" de couleur
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
    <style>
        :root {
            --bg-image: none;
            --bg-color: #f8fafc; /* slate-50 */
            --text-color: #1e293b; /* slate-800 */
            --text-muted-color: #64748b; /* slate-500 */
            --heading-color: #0f172a; /* slate-900 */
            --card-bg: rgba(255, 255, 255, 0.7);
            --card-border: #e2e8f0; /* slate-200 */
            --accent-color: #4f46e5;
            --property-item-border: #e2e8f0;
            --property-type-bg: #e2e8f0;
            --property-type-color: #475569;
            --code-block-bg: #f1f5f9;
            --code-block-color: #1e293b;
            --details-summary-bg: rgba(241, 245, 249, 0.7);
            --details-div-border: #e2e8f0;
            --step-card-bg: rgba(248, 250, 252, 0.7);
            --callout-blue-bg: rgba(59, 130, 246, 0.1);
            --callout-green-bg: rgba(16, 185, 129, 0.1);
            --callout-purple-bg: rgba(139, 92, 246, 0.1);
        }

        .dark {
            --bg-image: linear-gradient(to bottom right, #111827, #1F2937);
            --bg-color: #111827; /* Fallback */
            --text-color: #d1d5db;
            --text-muted-color: #6b7280;
            --heading-color: #ffffff;
            --card-bg: rgba(31, 41, 55, 0.5);
            --card-border: rgba(55, 65, 81, 0.7);
            --property-item-border: #374151;
            --property-type-bg: #374151;
            --property-type-color: #9CA3AF;
            --code-block-bg: #111827;
            --code-block-color: #d1d5db;
            --details-summary-bg: rgba(55, 65, 81, 0.5);
            --details-div-border: #374151;
            --step-card-bg: rgba(39, 51, 68, 0.7);
            --callout-blue-bg: rgba(59, 130, 246, 0.15);
            --callout-green-bg: rgba(16, 185, 129, 0.15);
            --callout-purple-bg: rgba(139, 92, 246, 0.15);
        }

        /* Appliquer les variables */
        html {
            background-color: var(--bg-color);
            background-image: var(--bg-image);
        }
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
        }
        .card, .side-nav {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: background-color 0.3s, border-color 0.3s;
        }
        .side-nav a { color: var(--text-muted-color); }
        .side-nav a:hover { background-color: var(--property-type-bg); color: var(--heading-color); }
        h1, h2, h3, h4, h5, h6 { color: var(--heading-color); }
        .text-muted { color: var(--text-muted-color); }
        .border-accent { border-color: var(--accent-color); }
        .property-item { border-color: var(--property-item-border); }
        .property-type { background-color: var(--property-type-bg); color: var(--property-type-color); }
        .code-block { background-color: var(--code-block-bg); }
        .code-block pre code { color: var(--code-block-color); }
        details > summary { background-color: var(--details-summary-bg); color: var(--heading-color); }
        details > div { border-color: var(--details-div-border); }
        .step-card { background-color: var(--step-card-bg); border-left-color: var(--accent-color);}
        .callout { padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; border-left-width: 4px; }
        .callout-blue { background-color: var(--callout-blue-bg); border-color: #3b82f6; }
        .callout-green { background-color: var(--callout-green-bg); border-color: #10b981; }
        .callout-purple { background-color: var(--callout-purple-bg); border-color: #8b5cf6; }

        /* Styles Généraux (inchangés) */
        .card {
            border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 1.5rem;
            opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .card.is-visible { opacity: 1; transform: translateY(0); }
        .code-block { border-radius: 0.5rem; padding: 1rem; position: relative; }
        .code-block pre code { white-space: pre-wrap; word-break: break-all; }
        .copy-btn {
            position: absolute; top: 0.5rem; right: 0.5rem; background-color: #374151; color: #D1D5DB;
            border: none; padding: 0.25rem 0.5rem; border-radius: 0.375rem; cursor: pointer; font-size: 0.75rem;
        }
        .copy-btn:hover { background-color: #4B5563; }
        .property-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom-width: 1px; }
        .property-item:last-child { border-bottom: none; }
        .property-details { display: flex; align-items: center; }
        .property-icon { margin-right: 0.75rem; width: 1.25rem; height: 1.25rem; }
        .property-type { font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 9999px; text-align: center; min-width: 80px; }
        .step-card { border-left-width: 4px; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; }
        .side-nav {
            position: fixed; top: 50%; left: 1rem; transform: translateY(-50%);
            border-radius: 0.75rem; padding: 1rem; display: none;
        }
        @media (min-width: 1280px) { .side-nav { display: block; } }
        .side-nav a {
            display: flex; align-items: center; padding: 0.5rem; margin-bottom: 0.5rem;
            border-radius: 0.5rem; transition: background-color 0.2s, color 0.2s; font-size: 0.875rem;
        }
        .side-nav a.active { background-color: var(--accent-color); color: white; font-weight: 600; }
        details > summary {
            cursor: pointer; padding: 1rem; border-radius: 0.5rem; font-weight: 600;
            position: relative; list-style: none;
        }
        details > summary::-webkit-details-marker { display: none; }
        details > summary::before {
            content: '▶'; position: absolute; left: 1rem; transform: rotate(0deg);
            transition: transform 0.2s; font-size: 0.8em;
        }
        details[open] > summary::before { transform: rotate(90deg); }
        details[open] > summary { border-bottom-left-radius: 0; border-bottom-right-radius: 0; }
        details > div { padding: 1.5rem; border-width: 1px; border-top: none; border-bottom-left-radius: 0.5rem; border-bottom-right-radius: 0.5rem; }
        .summary-content { margin-left: 1.5rem; display: flex; align-items: center; }
    </style>
</head>
<body>

    <nav class="side-nav">
        <ul id="nav-list">
             <li><a href="#philosophie" class="nav-link"><span>🏛️</span><span class="ml-3">Philosophie</span></a></li>
            <li><a href="#checklist" class="nav-link"><span>✅</span><span class="ml-3">Checklist</span></a></li>
            <li><a href="#notice" class="nav-link"><span>💡</span><span class="ml-3">Notice</span></a></li>
            <li><a href="#noyau" class="nav-link"><span>🧠</span><span class="ml-3">Noyau Essentiel</span></a></li>
            <li><a href="#relations" class="nav-link"><span>🕸️</span><span class="ml-3">Relations Avancées</span></a></li>
            <li><a href="#automatisation" class="nav-link"><span>🤖</span><span class="ml-3">Automatisation</span></a></li>
            <li><a href="#cockpit" class="nav-link"><span>🕹️</span><span class="ml-3">Cockpit</span></a></li>
            <li><a href="#plan-action" class="nav-link"><span>🗺️</span><span class="ml-3">Plan d'Action</span></a></li>
            <li><a href="#modules" class="nav-link"><span>🧩</span><span class="ml-3">Modules</span></a></li>
            <li><a href="#maintenance" class="nav-link"><span>🛠️</span><span class="ml-3">Maintenance</span></a></li>
        </ul>
    </nav>

    <div class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-12 card">
            <h1 class="text-4xl sm:text-5xl font-bold">🚀 Protocole V5</h1>
            <p class="mt-4 text-lg text-muted">Le Guide Ultime pour un Life OS Stratégique et Interactif</p>
        </header>

        <main>
             <section id="philosophie" class="mb-12">
                 <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🏛️ Section 0 : Philosophie d'Utilisation</h2>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-4">De l'Outil au Co-Pilote Stratégique</h3>
                    <p class="text-muted">Le Protocole V4 vous a donné une voiture de course. Le V5 vous apprend à la piloter. L'objectif n'est plus seulement d'organiser l'information, mais de transformer votre Life OS en un partenaire actif qui vous aide à penser, décider et agir plus intelligemment. Voici comment.</p>
                    <div class="step-card">
                        <h4 class="font-bold text-lg">1. Utiliser le Système pour la Prise de Décision</h4>
                        <p class="text-sm mt-2 text-muted">Pour des décisions complexes comme `Google One vs Proton`, ne vous contentez pas de lister des "pour" et des "contre". Créez une page dans `📚 Ressources` et structurez-la avec une base de données simple :</p>
                        <ul class="list-disc list-inside text-sm text-muted mt-2 space-y-2">
                           <li><strong>Critères :</strong> Coût, Simplicité, Sécurité, Intégration IA.</li>
                           <li><strong>Pondération :</strong> Donnez un poids à chaque critère (ex: Sécurité 10/10, Coût 7/10).</li>
                           <li><strong>Score :</strong> Notez chaque solution sur chaque critère.</li>
                           <li><strong>Conclusion :</strong> Une formule simple (`prop("Pondération") * prop("Score")`) vous donnera un score pondéré pour une décision basée sur les données.</li>
                        </ul>
                    </div>
                     <div class="step-card">
                        <h4 class="font-bold text-lg">2. Déléguer l'Analyse à votre Co-Pilote IA</h4>
                        <p class="text-sm mt-2 text-muted">Votre Life OS centralise les données. Gemini les transforme en intelligence. Lors de votre Revue Hebdomadaire, allez plus loin que la simple organisation. Fournissez à Gemini un contexte clair :</p>
                         <div class="code-block mt-2 text-sm">
                            <pre><code>"Voici mes domaines de vie et leur standard : [copiez depuis votre base Domaines]. Voici mes projets actifs : [copiez depuis votre Cockpit]. Voici les tâches que j'ai terminées cette semaine : [copiez depuis votre base Tâches]. En te basant sur ces informations, identifie 1) le domaine que j'ai le plus négligé, 2) le projet qui semble le plus bloqué, et 3) suggère 3 tâches stratégiques pour la semaine prochaine afin de rééquilibrer mes efforts."</code></pre>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="checklist" class="mb-12">
                 <div class="card">
                     <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="mr-3">✅</span>Checklist de Construction</h2>
                     <p class="mb-6 text-muted">Cochez les cases au fur et à mesure de votre progression. Votre avancée sera sauvegardée dans votre navigateur.</p>
                     <div id="construction-checklist" class="space-y-2">
                         <!-- La checklist sera générée par JavaScript -->
                     </div>
                 </div>
            </section>
            
            <section id="notice" class="mb-12">
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="mr-3">💡</span>Notice d'Utilisation : Votre Feuille de Route</h2>
                    <p class="mb-6 text-muted">Ce guide est dense, mais votre mise en place ne doit pas l'être. Abordez la construction de votre Life OS comme un projet en soi : par étapes logiques, en célébrant chaque brique posée. Voici la feuille de route recommandée pour une construction sereine et efficace.</p>
                    <div class="space-y-6">
                        <div class="step-card">
                            <h3 class="font-bold text-lg">Étape 1 : Construire la Fondation (Le Noyau Essentiel)</h3>
                            <p class="text-sm mt-2 text-muted"><strong>Pourquoi :</strong> On ne construit pas une maison en commençant par la décoration. Ces 4 bases de données sont les murs porteurs de votre système. Les créer en premier, en respectant scrupuleusement les propriétés et les relations, garantit que tout ce que vous ajouterez par la suite s'intégrera parfaitement.</p>
                            <p class="text-sm mt-2"><strong>Action :</strong> Prenez le temps de suivre la <strong>Section 1</strong>. C'est l'étape la plus technique, mais la plus cruciale.</p>
                        </div>
                        <div class="step-card">
                            <h3 class="font-bold text-lg">Étape 2 : Bâtir le Poste de Pilotage (Le Cockpit)</h3>
                            <p class="text-sm mt-2 text-muted"><strong>Pourquoi :</strong> Un système que vous n'aimez pas utiliser est un système mort-né. Le Cockpit est votre interface quotidienne. Le construire tôt vous permet de commencer à utiliser et à vous approprier votre Life OS immédiatement, même avec peu de données.</p>
                            <p class="text-sm mt-2"><strong>Action :</strong> Suivez la <strong>Section 3</strong> pour assembler votre page d'accueil. Ne vous inquiétez pas si elle semble vide au début, elle prendra vie à l'étape suivante.</p>
                        </div>
                        <div class="step-card">
                            <h3 class="font-bold text-lg">Étape 3 : Charger les Données Initiales (Votre Plan d'Action)</h3>
                            <p class="text-sm mt-2 text-muted"><strong>Pourquoi :</strong> C'est le moment où le système devient vraiment *vôtre*. En y intégrant vos projets et tâches prioritaires, vous passez de la théorie à la pratique. Le système commence à travailler pour vous.</p>
                             <p class="text-sm mt-2"><strong>Action :</strong> Utilisez la <strong>Section 4</strong>. Créez les projets et les tâches listés. Votre Cockpit va s'animer et vous montrer une vision claire de vos priorités.</p>
                        </div>
                        <div class="step-card">
                            <h3 class="font-bold text-lg">Étape 4 : Étendre les Capacités (Les Modules Optionnels)</h3>
                            <p class="text-sm mt-2 text-muted"><strong>Pourquoi :</strong> N'essayez pas de tout suivre d'un coup. Cela mène au découragement. Abordez les modules comme des extensions. Une fois que vous êtes à l'aise avec le noyau, ajoutez le module qui répond à votre besoin le plus pressant (par exemple, les Finances).</p>
                            <p class="text-sm mt-2"><strong>Action :</strong> Choisissez un seul module dans la <strong>Section 5</strong>. Construisez-le, commencez à l'utiliser. Passez au suivant quand vous vous sentez prêt.</p>
                        </div>
                        <div class="step-card">
                            <h3 class="font-bold text-lg">Étape 5 : Assurer la Pérennité (La Maintenance)</h3>
                            <p class="text-sm mt-2 text-muted"><strong>Pourquoi :</strong> Un jardin a besoin d'être entretenu, votre Life OS aussi. La Revue Hebdomadaire est le rituel qui empêche votre système de sombrer dans le chaos. C'est le processus qui garantit qu'il reste à jour, pertinent et un véritable outil de confiance.</p>
                            <p class="text-sm mt-2"><strong>Action :</strong> Faites de la <strong>Section 6</strong> une habitude. Bloquez une heure dans votre agenda chaque semaine. C'est le meilleur investissement que vous puissiez faire pour votre clarté mentale.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="noyau" class="mb-12">
                <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🧠 Section 1 : Le Noyau Essentiel</h2>
                <!-- CONTENU COMPLET DE LA SECTION 1 -->
            </section>

            <section id="relations" class="mb-12">
                 <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🕸️ Section 2 : Relations Avancées</h2>
                 <div class="card">
                     <h3 class="text-xl font-semibold mb-4">Tisser la Toile de votre Vie</h3>
                     <p class="text-muted">Votre système est puissant car il est interconnecté. Allez plus loin en reliant vos modules pour une vision à 360°.</p>
                     <div class="step-card">
                        <h4 class="font-bold text-lg">Lier un Achat à une Transaction</h4>
                        <p class="text-sm mt-2 text-muted"><strong>Pourquoi :</strong> Pour savoir exactement quelle dépense correspond à quel objet.</p>
                        <p class="text-sm mt-2"><strong>Action :</strong> Dans votre base `🛒 Achats & Garanties`, ajoutez une propriété de type **Relation** et liez-la à `💸 Transactions`.</p>
                    </div>
                 </div>
            </section>

            <section id="automatisation" class="mb-12">
                <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🤖 Section 3 : Automatisation & Optimisation</h2>
                <!-- CONTENU COMPLET DE LA SECTION 3 -->
            </section>
            
            <section id="cockpit" class="mb-12">
                <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🕹️ Section 4 : Le Cockpit</h2>
                <!-- CONTENU COMPLET DE LA SECTION 4 -->
            </section>

            <section id="plan-action" class="mb-12">
                <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🗺️ Section 5 : Plan d'Action Détaillé</h2>
                <!-- CONTENU COMPLET DE LA SECTION 5 -->
            </section>
            
            <section id="modules" class="mb-12">
                 <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🧩 Section 6 : Modules Optionnels</h2>
                 <!-- CONTENU COMPLET DE LA SECTION 6 -->
            </section>
            
            <section id="maintenance" class="mb-12">
                <h2 class="text-3xl font-bold mb-6 border-b-2 border-accent pb-2">🛠️ Section 7 : Maintenance</h2>
                 <div class="card">
                    <h3 class="text-xl font-semibold mb-4">Le Rituel de la Revue Hebdomadaire</h3>
                    <p class="text-muted mb-4">Créez un modèle de page récurrent avec cette checklist pour ne rien oublier :</p>
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"><span class="ml-3">Étape 1 : Vider les Boîtes de Réception</span></label>
                        <label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"><span class="ml-3">Étape 2 : Revoir les Projets Actifs</span></label>
                        <label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"><span class="ml-3">Étape 3 : Revoir la Semaine Passée et à Venir</span></label>
                        <label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"><span class="ml-3">Étape 4 : Revoir les Domaines</span></label>
                        <label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"><span class="ml-3">Étape 5 : Vider l'Esprit (Brain Dump)</span></label>
                         <label class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500"><span class="ml-3"><strong>Étape 6 : Synthétiser & Agir (Cycle de la Connaissance)</strong></span></label>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        function copyToClipboard(button) {
            const codeBlock = button.nextElementSibling;
            const code = codeBlock.querySelector('code');
            const textToCopy = code.innerText;
            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                button.innerText = 'Copié !';
                setTimeout(() => {
                    button.innerText = 'Copier';
                }, 2000);
            } catch (err) {
                console.error('Impossible de copier', err);
                button.innerText = 'Erreur';
            }
            document.body.removeChild(textArea);
        }

        // Animation on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.card').forEach(card => {
            observer.observe(card);
        });

        // Active nav link on scroll
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: "-50% 0px -50% 0px" });

        document.querySelectorAll('section').forEach(section => {
            sectionObserver.observe(section);
        });
        
        // --- SCRIPT POUR LA CHECKLIST ---
        document.addEventListener('DOMContentLoaded', () => {
            const checklistContainer = document.getElementById('construction-checklist');
            const databases = [
                { id: 'db_tasks', name: '⚡ Tâches Maîtresse' },
                { id: 'db_projects', name: '🎯 Projets' },
                { id: 'db_areas', name: '🌳 Domaines' },
                { id: 'db_resources', name: '📚 Ressources & Connaissances' },
                { id: 'db_accounts', name: '🏦 Comptes' },
                { id: 'db_transactions', name: '💸 Transactions' },
                { id: 'db_budgets', name: '📊 Budgets' },
                { id: 'db_subscriptions', name: '🔁 Abonnements' },
                { id: 'db_courses', name: '🎓 Formations' },
                { id: 'db_modules', name: '📚 Modules de Formation' },
                { id: 'db_expenses', name: '🧾 Notes de Frais' },
                { id: 'db_contracts', name: '📄 Contrats & Assurances' },
                { id: 'db_purchases', name: '🛒 Achats & Garanties' },
                { id: 'db_vehicles', name: '🚗 Véhicules' },
                { id: 'db_plants', name: '🌿 Plantes' },
                { id: 'db_pets', name: '🐾 Animaux' },
            ];

            const savedState = JSON.parse(localStorage.getItem('notionChecklistState')) || {};

            databases.forEach(db => {
                const isChecked = savedState[db.id] || false;
                const itemHTML = `
                    <label class="flex items-center p-2 rounded-md transition-colors hover:bg-gray-100 dark:hover:bg-gray-700/50">
                        <input type="checkbox" id="${db.id}" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" ${isChecked ? 'checked' : ''}>
                        <span class="ml-3">${db.name}</span>
                    </label>
                `;
                checklistContainer.innerHTML += itemHTML;
            });

            checklistContainer.addEventListener('change', (e) => {
                if (e.target.type === 'checkbox') {
                    savedState[e.target.id] = e.target.checked;
                    localStorage.setItem('notionChecklistState', JSON.stringify(savedState));
                }
            });
        });

    </script>

</body>
</html>

