<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jungle Urbaine | Guide Complet Notion</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom Styles & Theme Variables -->
    <style>
        :root {
            --background: #F8FBF6;
            --foreground: #1A2E24;
            --card-bg: rgba(255, 255, 255, 0.6);
            --card-border: rgba(26, 46, 36, 0.1);
            --primary: #228B22; /* ForestGreen */
            --primary-foreground: #FFFFFF;
            --muted-foreground: #5A6D64;
            --destructive: #dc2626;
            --tag-bg: rgba(26, 46, 36, 0.05);
        }

        .dark {
            --background: #121C16;
            --foreground: #E0EFE6;
            --card-bg: rgba(18, 28, 22, 0.6);
            --card-border: rgba(224, 239, 230, 0.1);
            --primary: #34D399; /* Emerald-400 */
            --primary-foreground: #121C16;
            --muted-foreground: #9CB3A8;
            --destructive: #ef4444;
            --tag-bg: rgba(224, 239, 230, 0.1);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--foreground);
        }

        .glass-card {
            background-color: var(--card-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--card-border);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .glass-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.07);
        }

        .nav-link.active { color: var(--primary); font-weight: 700; }
        
        .reveal { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }

        /* Modal Styles */
        .modal {
            visibility: hidden; opacity: 0; transition: visibility 0s 0.3s, opacity 0.3s ease;
        }
        .modal.is-open {
            visibility: visible; opacity: 1; transition: opacity 0.3s ease;
        }
        .modal-content {
            transform: scale(0.95); transition: transform 0.3s ease;
        }
        .modal.is-open .modal-content {
            transform: scale(1);
        }
        
        /* Accordion */
        .accordion-content {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.4s ease-in-out;
        }
        .accordion-item.active .accordion-content { grid-template-rows: 1fr; }
        .accordion-content > div { overflow: hidden; }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header id="header" class="fixed top-0 left-0 w-full z-50 transition-all duration-300">
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#accueil" class="flex items-center gap-2 text-xl font-bold">
                <span class="text-2xl">üåø</span>
                <span>Jungle Urbaine</span>
            </a>
            <div class="hidden md:flex items-center gap-6 text-sm font-medium text-[color:var(--muted-foreground)]">
                <a href="#dashboard" class="nav-link">Tableau de Bord</a>
                <a href="#plantes" class="nav-link">Ma Collection</a>
                <a href="#bases" class="nav-link">Bases de Donn√©es</a>
                <a href="#workflows" class="nav-link">Workflows</a>
                <a href="#templates" class="nav-link">Mod√®les</a>
            </div>
            <button id="theme-toggle" class="p-2 rounded-full hover:bg-[color:var(--card-border)] transition-colors">
                <!-- Theme icons here -->
            </button>
        </nav>
    </header>

    <main class="container mx-auto px-4 pt-24">
        
        <!-- Section 1: Accueil -->
        <section id="accueil" class="min-h-[80vh] flex flex-col items-center justify-center text-center py-16">
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tighter mb-4">Votre jungle. Votre guide.</h1>
            <p class="max-w-2xl text-lg md:text-xl text-[color:var(--muted-foreground)] mb-12">Le guide complet pour construire votre syst√®me de suivi de plantes sur Notion.</p>
            <a href="#dashboard" class="bg-[color:var(--primary)] text-[color:var(--primary-foreground)] font-bold py-3 px-8 rounded-full hover:opacity-90 transition-opacity">
                Commencer
            </a>
        </section>

        <!-- Section 2: Tableau de Bord -->
        <section id="dashboard" class="py-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold tracking-tight">Tableau de Bord</h2>
                <p class="max-w-3xl mx-auto mt-4 text-[color:var(--muted-foreground)]">Vos actions prioritaires et les raccourcis pour g√©rer votre jungle.</p>
            </div>
            <div id="dashboard-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Dashboard cards injected by JS -->
            </div>
        </section>

        <!-- Section 3: Vos Plantes -->
        <section id="plantes" class="py-24">
            <div class="flex flex-col md:flex-row justify-between items-center mb-12">
                <div class="text-center md:text-left">
                    <h2 class="text-3xl md:text-4xl font-bold tracking-tight">Ma Collection</h2>
                    <p class="max-w-3xl mt-4 text-[color:var(--muted-foreground)]">G√©rez, filtrez et interagissez avec votre collection de plantes.</p>
                </div>
                <button id="add-plant-btn" class="mt-4 md:mt-0 flex items-center gap-2 bg-[color:var(--primary)] text-[color:var(--primary-foreground)] font-bold py-2 px-5 rounded-full hover:opacity-90 transition-opacity">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                    Ajouter une plante
                </button>
            </div>
            <!-- Filtres et Recherche -->
            <div class="flex flex-col md:flex-row gap-4 mb-8">
                <div class="relative flex-grow">
                    <input type="search" id="search-input" placeholder="Rechercher une plante..." class="w-full pl-10 pr-4 py-2 rounded-full border border-[color:var(--card-border)] bg-transparent focus:ring-2 focus:ring-[color:var(--primary)] focus:outline-none">
                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[color:var(--muted-foreground)]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                </div>
                <div id="filter-buttons" class="flex items-center gap-2 flex-wrap"></div>
            </div>
            <div id="plant-gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            <p id="no-results" class="text-center text-[color:var(--muted-foreground)] hidden mt-8">Aucune plante ne correspond √† votre recherche.</p>
        </section>
        
        <!-- Section 4: Bases de Donn√©es -->
        <section id="bases" class="py-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold tracking-tight">D√©tail des Bases de Donn√©es</h2>
                <p class="max-w-3xl mx-auto mt-4 text-[color:var(--muted-foreground)]">Voici la structure exacte √† reproduire dans Notion pour chaque base, avec les noms de propri√©t√©s en anglais pour les formules.</p>
            </div>
            <div id="db-accordion-container" class="space-y-4 max-w-4xl mx-auto"></div>
        </section>

        <!-- Section 5: Workflows -->
        <section id="workflows" class="py-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold tracking-tight">Workflows & Automatisations</h2>
                <p class="max-w-3xl mx-auto mt-4 text-[color:var(--muted-foreground)]">Connectez vos bases de donn√©es avec des boutons pour automatiser les t√¢ches r√©p√©titives.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Workflow Ajouter une Plante -->
                <div class="glass-card p-6 rounded-2xl">
                    <h3 class="text-xl font-bold flex items-center gap-3 mb-3">‚ûï Bouton "Nouvelle Plante"</h3>
                    <p class="text-sm text-[color:var(--muted-foreground)] mb-4">Ce bouton, plac√© sur votre page d'accueil Notion, cr√©e une nouvelle entr√©e dans votre collection.</p>
                    <ol class="list-decimal list-inside text-sm space-y-2">
                        <li><b>Action :</b> Ajouter une page √†...</li>
                        <li><b>Base de donn√©es :</b> `üåø Ma Collection de Plantes`</li>
                        <li><b>Propri√©t√©s pr√©-remplies :</b></li>
                        <li class="ml-4">`‚ú® √âtat` (`Status`) ‚Üí "En pleine forme"</li>
                        <li class="ml-4">`üíß Dernier arrosage` (`LastWatered`) ‚Üí "@Aujourd'hui"</li>
                        <li><b>Ouvrir la page :</b> Activer pour remplir les autres d√©tails.</li>
                    </ol>
                </div>
                <!-- Workflow Ajouter un Achat -->
                <div class="glass-card p-6 rounded-2xl">
                    <h3 class="text-xl font-bold flex items-center gap-3 mb-3">üõí Bouton "Nouvel Achat"</h3>
                    <p class="text-sm text-[color:var(--muted-foreground)] mb-4">Permet d'enregistrer rapidement un nouvel achat (plante, pot, terreau...).</p>
                    <ol class="list-decimal list-inside text-sm space-y-2">
                        <li><b>Action :</b> Ajouter une page √†...</li>
                        <li><b>Base de donn√©es :</b> `üõçÔ∏è Mes Achats Jungle`</li>
                         <li><b>Propri√©t√©s pr√©-remplies :</b></li>
                        <li class="ml-4">`üìÖ Date` (`Date`) ‚Üí "@Aujourd'hui"</li>
                        <li><b>Ouvrir la page :</b> Activer pour lier la plante, entrer le co√ªt, etc.</li>
                    </ol>
                </div>
                <!-- Workflow Arrosage -->
                <div class="glass-card p-6 rounded-2xl">
                    <h3 class="text-xl font-bold flex items-center gap-3 mb-3">üíß Bouton "Arroser"</h3>
                    <p class="text-sm text-[color:var(--muted-foreground)] mb-4">Ce bouton, DANS un mod√®le de la base `üåø Ma Collection de Plantes`, met √† jour la date de dernier arrosage.</p>
                    <ol class="list-decimal list-inside text-sm space-y-2">
                        <li><b>Action :</b> Modifier des pages dans...</li>
                        <li><b>Base de donn√©es :</b> `üåø Ma Collection de Plantes`</li>
                        <li><b>Filtre :</b> `Nom` est `Cette page`</li>
                        <li><b>Propri√©t√© √† modifier :</b> `üíß Dernier arrosage` (`LastWatered`)</li>
                        <li><b>Valeur :</b> `@Aujourd'hui`</li>
                    </ol>
                </div>
                <!-- Workflow T√¢che termin√©e -->
                <div class="glass-card p-6 rounded-2xl">
                    <h3 class="text-xl font-bold flex items-center gap-3 mb-3">‚úÖ Bouton "T√¢che termin√©e"</h3>
                    <p class="text-sm text-[color:var(--muted-foreground)] mb-4">Dans votre base `üóìÔ∏è Calendrier`, ce bouton marque une t√¢che comme faite.</p>
                    <ol class="list-decimal list-inside text-sm space-y-2">
                        <li><b>Action :</b> Modifier des pages dans...</li>
                        <li><b>Base de donn√©es :</b> `üóìÔ∏è Mon Calendrier d'Entretien`</li>
                        <li><b>Filtre :</b> `T√¢che` est `Cette page`</li>
                        <li><b>Propri√©t√© √† modifier :</b> `‚úÖ Statut` (`Status`)</li>
                        <li><b>Valeur :</b> `Fait` ‚úîÔ∏è</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- Section 6: Mod√®les -->
        <section id="templates" class="py-24">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold tracking-tight">Mod√®les de Page</h2>
                <p class="max-w-3xl mx-auto mt-4 text-[color:var(--muted-foreground)]">Configurez ces mod√®les pour chaque base de donn√©es afin de standardiser vos pages et d'int√©grer vos boutons.</p>
            </div>
            <div id="template-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Template cards injected by JS -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="container mx-auto text-center py-8 px-4 mt-16 border-t border-[color:var(--card-border)]">
        <p class="text-xs text-[color:var(--muted-foreground)]">¬© 2024 Jungle Urbaine</p>
    </footer>
    
    <!-- Modal pour ajouter une plante -->
    <div id="plant-modal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-overlay fixed inset-0 bg-black/50" onclick="closeModal('plant-modal')"></div>
        <div class="modal-content glass-card rounded-2xl w-full max-w-md p-6 relative">
            <h2 class="text-2xl font-bold mb-4">Ajouter une nouvelle plante</h2>
            <form id="add-plant-form">
                <div class="space-y-4">
                    <div>
                        <label for="plant-name" class="text-sm font-medium">Nom de la plante</label>
                        <input type="text" id="plant-name" required class="w-full mt-1 p-2 rounded-md border border-[color:var(--card-border)] bg-transparent focus:ring-2 focus:ring-[color:var(--primary)]">
                    </div>
                    <div>
                        <label for="plant-luminosity" class="text-sm font-medium">Luminosit√©</label>
                        <select id="plant-luminosity" class="w-full mt-1 p-2 rounded-md border border-[color:var(--card-border)] bg-[color:var(--background)]">
                            <option>Faible</option>
                            <option>Mod√©r√©e</option>
                            <option>Lumineuse</option>
                            <option>Vive indirecte</option>
                        </select>
                    </div>
                    <div>
                        <label for="plant-watering" class="text-sm font-medium">Arrosage</label>
                        <input type="text" id="plant-watering" placeholder="Ex: Laisser s√©cher compl√®tement" required class="w-full mt-1 p-2 rounded-md border border-[color:var(--card-border)] bg-transparent focus:ring-2 focus:ring-[color:var(--primary)]">
                    </div>
                </div>
                <div class="flex justify-end gap-4 mt-6">
                    <button type="button" onclick="closeModal('plant-modal')" class="py-2 px-4 rounded-md font-semibold hover:bg-[color:var(--card-border)]">Annuler</button>
                    <button type="submit" class="py-2 px-4 rounded-md font-semibold bg-[color:var(--primary)] text-[color:var(--primary-foreground)]">Ajouter</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        // --- DATA ---
        let plantData = [
            { id: 1, name: 'Dracaena', luminosity: 'Mod√©r√©e', watering: 'Terre s√®che en surface', image: '400x400/2c523e/ffffff?text=Dracaena', needsAction: true, status: "Malade (cochenilles)" },
            { id: 2, name: 'Chamaedorea', luminosity: 'Faible', watering: 'D√®s que la terre est s√®che sur 2cm', image: '400x400/2c523e/ffffff?text=Chamaedorea', needsAction: false, status: "En pleine forme" },
            { id: 3, name: 'Monstera Deliciosa', luminosity: 'Mod√©r√©e', watering: 'Terre s√®che en profondeur', image: '400x400/2c523e/ffffff?text=Monstera', needsAction: false, status: "En pleine forme" },
            { id: 4, name: 'Sansevieria', luminosity: 'Faible', watering: 'Laisser s√©cher compl√®tement', image: '400x400/2c523e/ffffff?text=Sansevieria', needsAction: false, status: "En pleine forme" },
            { id: 5, name: 'Cactus de No√´l', luminosity: 'Lumineuse', watering: 'Mod√©r√©, r√©gulier', image: '400x400/2c523e/ffffff?text=Cactus+de+Noel', needsAction: true, status: "A besoin d'engrais" },
            { id: 6, name: 'Orchid√©es', luminosity: 'Vive indirecte', watering: 'Par bassinage', image: '400x400/2c523e/ffffff?text=Orchidees', needsAction: false, status: "En pleine forme" },
            { id: 7, name: 'Hoya Carnosa Tricolor', luminosity: 'Vive indirecte', watering: 'Laisser s√©cher entre les arrosages', image: '400x400/2c523e/ffffff?text=Hoya', needsAction: false, status: "En pleine forme" }
        ];

        const dbData = [
            {
                icon: 'üåø', title: 'Ma Collection de Plantes',
                description: "C'est la base de donn√©es centrale. Chaque page est une plante que vous poss√©dez, agissant comme sa carte d'identit√©.",
                properties: [
                    { emoji: 'üè∑Ô∏è', fr: 'Nom', en: 'Name', type: 'Titre' },
                    { emoji: 'üõçÔ∏è', fr: 'Achats', en: 'Purchases', type: 'Relation (avec Achats)' },
                    { emoji: 'üìç', fr: 'Emplacement', en: 'Location', type: 'Select', options: ['Salon', 'Chambre', 'Bureau', 'Cuisine', 'Balcon'] },
                    { emoji: '‚òÄÔ∏è', fr: 'Luminosit√©', en: 'Luminosity', type: 'Select', options: ['Faible', 'Mod√©r√©e', 'Lumineuse', 'Vive indirecte', 'Plein soleil'] },
                    { emoji: 'üíß', fr: 'Dernier arrosage', en: 'LastWatered', type: 'Date' },
                    { emoji: 'üóìÔ∏è', fr: 'Prochain arrosage', en: 'NextWatering', type: 'Formule' },
                    { emoji: '‚ú®', fr: '√âtat', en: 'Status', type: 'Select', options: ['En pleine forme ‚ú®', "A besoin d'eau üíß", "A besoin d'engrais üíä", 'Malade ü¶†', 'En dormance üí§', 'Offerte / Vendue üí∏'] },
                    { emoji: 'ü¶†', fr: 'Maladies', en: 'Diseases', type: 'Relation (avec Maladies)' },
                ]
            },
            {
                icon: 'üõçÔ∏è', title: 'Mes Achats Jungle',
                description: "Suivez toutes vos d√©penses li√©es aux plantes, des pots au terreau, pour garder un oeil sur votre budget.",
                properties: [
                    { emoji: 'üõí', fr: 'Article', en: 'Item', type: 'Titre' },
                    { emoji: 'üåø', fr: 'Plantes li√©es', en: 'RelatedPlants', type: 'Relation (avec Collection)' },
                    { emoji: 'üìã', fr: 'Type', en: 'Type', type: 'Select', options: ['Plante', 'Pot / Cache-pot', 'Terreau / Substrat', 'Engrais', 'Outil', 'D√©coration'] },
                    { emoji: 'üí∞', fr: 'Co√ªt', en: 'Cost', type: 'Nombre' },
                    { emoji: 'üìÖ', fr: 'Date', en: 'Date', type: 'Date' },
                    { emoji: 'üè¨', fr: 'Enseigne', en: 'Store', type: 'Relation (avec Enseignes)' },
                ]
            },
            {
                icon: 'üóìÔ∏è', title: 'Calendrier d\'Entretien',
                description: "Le centre de commande pour toutes vos t√¢ches. Ne manquez plus jamais un arrosage, un rempotage ou une fertilisation.",
                properties: [
                    { emoji: 'üìù', fr: 'T√¢che', en: 'Task', type: 'Titre' },
                    { emoji: 'üåø', fr: 'Plante concern√©e', en: 'Plant', type: 'Relation (avec Collection)' },
                    { emoji: '‚úÖ', fr: 'Statut', en: 'Status', type: 'Select', options: ['√Ä faire ‚¨ú', 'En cours ‚è≥', 'Fait ‚úîÔ∏è'] },
                    { emoji: 'üìÖ', fr: 'Date', en: 'Date', type: 'Date' },
                    { emoji: 'üîÅ', fr: 'R√©currence', en: 'Recurrence', type: 'Select', options: ['Ponctuel', 'Hebdomadaire', 'Mensuel', 'Annuel'] },
                ]
            },
            {
                icon: 'ü¶†', title: 'Maladies & Soins',
                description: "Votre journal de sant√© pour les plantes. Documentez les probl√®mes, les traitements et leur efficacit√© pour agir vite.",
                properties: [
                    { emoji: 'üî¨', fr: 'Maladie', en: 'Disease', type: 'Titre' },
                    { emoji: 'üåø', fr: 'Plantes affect√©es', en: 'AffectedPlants', type: 'Relation (avec Collection)' },
                    { emoji: 'üìÖ', fr: 'Date d\'apparition', en: 'DateDetected', type: 'Date' },
                    { emoji: 'üìù', fr: 'Sympt√¥mes', en: 'Symptoms', type: 'Texte' },
                    { emoji: 'üíä', fr: 'Traitement', en: 'Treatment', type: 'Texte' },
                    { emoji: '‚ú®', fr: 'Statut', en: 'Status', type: 'Select', options: ['En observation üëÄ', 'En cours de traitement üíä', 'Gu√©ri ‚úÖ', 'Non r√©solu üò•'] },
                ]
            },
            {
                icon: 'üè¨', title: 'Nos Enseignes',
                description: "Votre carnet d'adresses pour retrouver facilement vos jardineries et magasins de bricolage pr√©f√©r√©s.",
                properties: [
                    { emoji: 'üè∑Ô∏è', fr: 'Nom', en: 'Name', type: 'Titre' },
                    { emoji: 'üõçÔ∏è', fr: 'Achats effectu√©s', en: 'Purchases', type: 'Relation (avec Achats)' },
                    { emoji: '‚≠ê', fr: 'Type', en: 'Type', type: 'Select', options: ['Jardinerie', 'Grande surface', 'En ligne', 'Boutique sp√©cialis√©e'] },
                    { emoji: 'üìç', fr: 'Adresse', en: 'Address', type: 'Texte' },
                    { emoji: 'üåê', fr: 'Site Web', en: 'Website', type: 'URL' },
                ]
            },
        ];
        
        const templateData = [
            {
                icon: 'üåø',
                title: 'Nouvelle Plante',
                bdd: 'Ma Collection de Plantes',
                content: "Ce mod√®le doit √™tre d√©fini par d√©faut. √Ä l'int√©rieur, placez le bouton <b>üíß Arroser</b>. Vous pouvez aussi ajouter des sections pour des notes, une galerie photo de l'√©volution de la plante, etc."
            },
            {
                icon: 'üíß',
                title: 'Arrosage Hebdomadaire',
                bdd: "Calendrier d'Entretien",
                content: "Utilisez ce mod√®le pour cr√©er une t√¢che r√©currente. Dans le corps de la page, vous pouvez mettre une checklist des plantes √† arroser chaque semaine. La propri√©t√© <b>R√©currence</b> doit √™tre r√©gl√©e sur 'Hebdomadaire'."
            },
            {
                icon: 'ü¶†',
                title: 'Nouveau Cas de Maladie',
                bdd: "Maladies & Soins",
                content: "Ce mod√®le sert √† documenter rapidement un probl√®me. Dans le corps de la page, ajoutez des sections : 'Observation initiale', 'Actions entreprises', 'Suivi de l'√©volution'. R√©glez le <b>Statut</b> par d√©faut sur 'En observation üëÄ'."
            }
        ];

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
            renderFilters();
            renderPlantGallery(plantData);
            renderDbAccordion();
            renderTemplates();
            setupEventListeners();
            setupScrollAnimations();
        });

        // --- RENDER FUNCTIONS ---
        function renderDashboard() {
            const container = document.getElementById('dashboard-cards');
            const toWater = plantData.filter(p => p.status === "A besoin d'eau").length;
            const otherActions = plantData.filter(p => p.needsAction && p.status !== "A besoin d'eau").length;
            container.innerHTML = `
                <div class="glass-card p-6 rounded-2xl"><h3 class="text-5xl font-bold text-[color:var(--primary)]">${toWater}</h3><p class="font-semibold mt-2">Plantes √† arroser</p></div>
                <div class="glass-card p-6 rounded-2xl"><h3 class="text-5xl font-bold text-[color:var(--destructive)]">${otherActions}</h3><p class="font-semibold mt-2">Autres actions</p></div>
                <div class="glass-card p-6 rounded-2xl"><h3 class="text-5xl font-bold text-[color:var(--primary)]">${plantData.length}</h3><p class="font-semibold mt-2">Plantes au total</p></div>
                <a href="#workflows" class="glass-card p-6 rounded-2xl flex flex-col items-center justify-center text-center hover:border-[color:var(--primary)]"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-[color:var(--primary)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg><p class="font-semibold mt-2">Ajouter un achat</p></a>
            `;
        }

        function renderFilters() {
            const container = document.getElementById('filter-buttons');
            const filters = ['Tout', 'Action requise', 'Faible', 'Vive indirecte'];
            container.innerHTML = filters.map((f, i) => `<button class="filter-btn px-4 py-1.5 text-sm font-semibold rounded-full transition-colors ${i === 0 ? 'active bg-[color:var(--primary)] text-[color:var(--primary-foreground)]' : 'bg-[color:var(--card-border)] hover:bg-[color:var(--primary)] hover:text-[color:var(--primary-foreground)]'}" data-filter="${f}">${f}</button>`).join('');
        }

        function renderPlantGallery(plants) {
            const gallery = document.getElementById('plant-gallery');
            const noResults = document.getElementById('no-results');
            gallery.innerHTML = '';
            noResults.classList.toggle('hidden', plants.length > 0);
            plants.forEach((plant, index) => {
                const statusBadge = plant.needsAction
                    ? `<span class="absolute top-3 right-3 text-xs font-bold py-1 px-2.5 rounded-full bg-[color:var(--destructive)] text-white">${plant.status}</span>`
                    : `<span class="absolute top-3 right-3 text-xs font-bold py-1 px-2.5 rounded-full bg-green-500 text-white">En forme</span>`;
                gallery.innerHTML += `
                    <div class="glass-card rounded-2xl overflow-hidden group relative reveal" style="transition-delay: ${index * 50}ms;">
                        <img src="https://placehold.co/${plant.image}" alt="${plant.name}" class="w-full h-60 object-cover" loading="lazy">
                        ${statusBadge}
                        <div class="p-5">
                            <h4 class="text-xl font-bold">${plant.name}</h4>
                            <div class="mt-4 space-y-3 text-sm">
                                <div class="flex items-start gap-2">‚òÄÔ∏è <span class="font-semibold">Luminosit√©:</span> <span class="text-[color:var(--muted-foreground)]">${plant.luminosity}</span></div>
                                <div class="flex items-start gap-2">üíß <span class="font-semibold">Arrosage:</span> <span class="text-[color:var(--muted-foreground)]">${plant.watering}</span></div>
                            </div>
                        </div>
                        <div class="absolute inset-0 bg-black/50 flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            <button class="bg-white/20 backdrop-blur-sm text-white font-bold py-2 px-4 rounded-full hover:bg-white/30">üíß Arroser</button>
                            <button class="bg-white/20 backdrop-blur-sm text-white font-bold py-2 px-4 rounded-full hover:bg-white/30">üìù Fiche</button>
                        </div>
                    </div>`;
            });
        }

        function renderDbAccordion() {
            const container = document.getElementById('db-accordion-container');
            container.innerHTML = dbData.map(db => `
                <div class="accordion-item glass-card rounded-2xl">
                    <div class="accordion-header p-5 cursor-pointer flex justify-between items-center gap-4">
                        <div class="flex items-center gap-4"><span class="text-2xl">${db.icon}</span><h3 class="text-lg font-semibold">${db.title}</h3></div>
                        <svg class="chevron w-5 h-5 text-[color:var(--muted-foreground)] transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                    </div>
                    <div class="accordion-content">
                        <div>
                            <div class="px-5 pb-5 pt-2 border-t border-[color:var(--card-border)]">
                                <p class="text-sm text-[color:var(--muted-foreground)] mb-4">${db.description || ''}</p>
                                <ul class="space-y-2 text-sm">
                                    ${db.properties.map(p => `
                                        <li class="p-2 rounded-md hover:bg-[color:var(--background)]">
                                            <div class="flex items-center justify-between">
                                                <span class="font-medium">${p.emoji} ${p.fr}</span>
                                                <span class="text-xs font-mono p-1 bg-[color:var(--card-border)] rounded">${p.en} ${p.type ? `(${p.type})` : ''}</span>
                                            </div>
                                            ${p.options ? `<div class="mt-2 flex flex-wrap gap-2">${p.options.map(o => `<span class="text-xs font-medium px-2 py-0.5 rounded-full bg-[color:var(--tag-bg)]">${o}</span>`).join('')}</div>` : ''}
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            document.querySelectorAll('.accordion-header').forEach(header => header.addEventListener('click', toggleAccordion));
        }
        
        function renderTemplates() {
            const container = document.getElementById('template-cards');
            container.innerHTML = templateData.map(t => `
                <div class="glass-card p-6 rounded-2xl">
                    <h3 class="text-xl font-bold flex items-center gap-3 mb-1">${t.icon} ${t.title}</h3>
                    <p class="text-xs font-semibold text-[color:var(--primary)] mb-4">Pour la BDD : ${t.bdd}</p>
                    <p class="text-sm text-[color:var(--muted-foreground)]">${t.content}</p>
                </div>
            `).join('');
        }

        // --- EVENT HANDLERS & LOGIC ---
        function setupEventListeners() {
            document.getElementById('add-plant-btn').addEventListener('click', () => openModal('plant-modal'));
            document.getElementById('add-plant-form').addEventListener('submit', handleAddPlant);
            document.querySelectorAll('.filter-btn').forEach(btn => btn.addEventListener('click', handleFilterClick));
            document.getElementById('search-input').addEventListener('input', filterAndSearchPlants);
        }

        function handleAddPlant(e) {
            e.preventDefault();
            const name = document.getElementById('plant-name').value;
            const luminosity = document.getElementById('plant-luminosity').value;
            const watering = document.getElementById('plant-watering').value;
            const newPlant = {
                id: Date.now(),
                name, luminosity, watering,
                image: `400x400/2c523e/ffffff?text=${encodeURIComponent(name)}`,
                needsAction: false,
                status: "En pleine forme"
            };
            plantData.push(newPlant);
            renderPlantGallery(plantData);
            renderDashboard();
            closeModal('plant-modal');
            e.target.reset();
        }

        function handleFilterClick(e) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active', 'bg-[color:var(--primary)]', 'text-[color:var(--primary-foreground)]'));
            e.currentTarget.classList.add('active', 'bg-[color:var(--primary)]', 'text-[color:var(--primary-foreground)]');
            filterAndSearchPlants();
        }

        function filterAndSearchPlants() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
            let filtered = plantData;

            if (activeFilter !== 'Tout') {
                if (activeFilter === 'Action requise') filtered = filtered.filter(p => p.needsAction);
                else filtered = filtered.filter(p => p.luminosity.toLowerCase().includes(activeFilter.toLowerCase()));
            }

            if (searchTerm) {
                filtered = filtered.filter(p => p.name.toLowerCase().includes(searchTerm));
            }

            renderPlantGallery(filtered);
            setupScrollAnimations();
        }
        
        function toggleAccordion(e) {
            const item = e.currentTarget.parentElement;
            item.classList.toggle('active');
            item.querySelector('.chevron').classList.toggle('rotate-180');
        }

        function openModal(id) { document.getElementById(id).classList.add('is-open'); }
        function closeModal(id) { document.getElementById(id).classList.remove('is-open'); }

        // --- UI & ANIMATIONS ---
        function setupScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        // --- THEME SWITCHER ---
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.innerHTML = `<svg id="theme-icon-light" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg><svg id="theme-icon-dark" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>`;
        const lightIcon = document.getElementById('theme-icon-light');
        const darkIcon = document.getElementById('theme-icon-dark');
        const htmlEl = document.documentElement;
        const setTheme = (isDark) => {
            htmlEl.classList.toggle('dark', isDark);
            lightIcon.classList.toggle('hidden', isDark);
            darkIcon.classList.toggle('hidden', !isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        };
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        setTheme(savedTheme ? savedTheme === 'dark' : prefersDark);
        themeToggle.addEventListener('click', () => setTheme(!htmlEl.classList.contains('dark')));
        
        // --- HEADER STYLE ON SCROLL ---
        window.addEventListener('scroll', () => {
            header.classList.toggle('glass-card', window.scrollY > 10);
        });

        // --- ACTIVE NAV LINK ON SCROLL ---
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                    });
                }
            });
        }, { root: null, rootMargin: '0px', threshold: 0.4 });
        sections.forEach(section => observer.observe(section));
    </script>
</body>
</html>
```
